<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæ—¥å¿«ä¹ï¼</title>
    <style>
        :root {
            --bg-color: #fff0f5;
            --cake-color: #f3b071;
            --icing-color: #ffffff;
            --strawberry-color: #ff4757;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* å°é¢ï¼šè§£å†³æµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾é™åˆ¶ */
        #overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #ff4757;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            color: white;
            cursor: pointer;
            transition: opacity 0.8s;
        }

        .envelope-icon { font-size: 80px; margin-bottom: 20px; }

        .main-content {
            text-align: center;
            display: none;
            opacity: 0;
            transition: opacity 1s;
        }

        /* è›‹ç³•å±•ç¤º */
        .cake-wrapper { position: relative; width: 300px; height: 250px; margin: 0 auto; }
        .plate { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); width: 300px; height: 20px; background: #f1f2f6; border-radius: 50%; }
        
        .cake-body {
            position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 260px; height: 140px;
            background: linear-gradient(to bottom, var(--cake-color), #e67e22);
            border-radius: 10px 10px 40px 40px;
            z-index: 2; overflow: hidden;
        }

        .icing { position: absolute; top: 0; width: 100%; height: 40px; background: var(--icing-color); }
        .drip { position: absolute; background: var(--icing-color); width: 40px; height: 60px; border-radius: 0 0 20px 20px; }
        .drip:nth-child(1) { left: 0; height: 60px; }
        .drip:nth-child(2) { left: 60px; height: 80px; }
        .drip:nth-child(3) { left: 120px; height: 50px; }
        .drip:nth-child(4) { left: 180px; height: 75px; }
        .drip:nth-child(5) { right: 0; height: 55px; }

        .top-decoration { position: absolute; bottom: 160px; left: 50%; transform: translateX(-50%); width: 260px; height: 50px; z-index: 10; }
        .strawberry { position: absolute; width: 35px; height: 45px; background: #ff4757; border-radius: 50% 50% 50% 50% / 70% 70% 30% 30%; }
        .s1 { left: 30px; transform: rotate(-15deg); }
        .s2 { right: 30px; transform: rotate(15deg); }
        .s3 { left: 50%; transform: translateX(-50%) scale(1.1); bottom: -10px; }

        .candle-container { position: absolute; left: 50%; bottom: 30px; transform: translateX(-50%); cursor: pointer; z-index: 20; }
        .candle { width: 12px; height: 60px; background: linear-gradient(to right, #f1c40f, #e67e22); border-radius: 3px; }
        .flame {
            position: absolute; top: -25px; left: 50%; transform: translateX(-50%);
            width: 15px; height: 25px; background: orange; border-radius: 50% 50% 20% 20%;
            box-shadow: 0 0 20px orange; animation: flicker 0.6s infinite alternate;
        }

        @keyframes flicker { to { transform: translateX(-50%) scale(1.1); opacity: 0.8; } }
        
        .text-area { margin-top: 20px; color: #ff4757; }
    </style>
</head>
<body>

    <div id="overlay" onclick="startExperience()">
        <div class="envelope-icon">âœ‰ï¸</div>
        <p>æœ‰ä¸€ä»½æ¥è‡ªè¿œæ–¹çš„ç”Ÿæ—¥æƒŠå–œ</p>
        <p>ç‚¹å‡»å¼€å¯</p>
    </div>

    <div class="main-content" id="mainContent">
        <div class="cake-wrapper">
            <div class="plate"></div>
            <div class="cake-body">
                <div class="icing"><div class="drip"></div><div class="drip"></div><div class="drip"></div><div class="drip"></div><div class="drip"></div></div>
            </div>
            <div class="top-decoration">
                <div class="strawberry s1"></div>
                <div class="strawberry s2"></div>
                <div class="strawberry s3"></div>
                <div class="candle-container" id="candleBtn">
                    <div class="candle"><div class="flame" id="flame"></div></div>
                </div>
            </div>
        </div>
        <div class="text-area">
            <h1>Happy Birthday!</h1>
            <p id="hintText">å¿«å¹ç­èœ¡çƒ›è®¸ä¸ªæ„¿å§ï¼</p>
        </div>
    </div>

    <audio id="bgAudio" loop src="bg_music.m4a"></audio>
    <audio id="wishAudio" src="voice_message.m4a"></audio>

    <script>
    function startExperience() {
        const overlay = document.getElementById('overlay');
        const mainContent = document.getElementById('mainContent');
        const bgAudio = document.getElementById('bgAudio');

        overlay.style.opacity = '0';
        setTimeout(() => {
            overlay.style.display = 'none';
            mainContent.style.display = 'block';
            setTimeout(() => mainContent.style.opacity = '1', 50);
            
            // å¯åŠ¨èƒŒæ™¯éŸ³ä¹ï¼ˆå¾ªç¯æ’­æ”¾ï¼‰
            bgAudio.play().catch(e => console.log("æ’­æ”¾è¢«æ‹¦æˆª:", e));
        }, 800);
    }

    const candleBtn = document.getElementById('candleBtn');
    const flame = document.getElementById('flame');
    const wishAudio = document.getElementById('wishAudio');
    const bgAudio = document.getElementById('bgAudio');
    let blown = false;

    candleBtn.addEventListener('click', () => {
        if (!blown) {
            // 1. ç†„ç­èœ¡çƒ›
            flame.style.display = 'none';
            blown = true;
            
            // 2. åœæ­¢èƒŒæ™¯éŸ³ä¹
            bgAudio.pause();
            bgAudio.currentTime = 0; // å°†èƒŒæ™¯éŸ³è¿›åº¦å½’é›¶
            
            // 3. æ’­æ”¾ä½ çš„è¯­éŸ³æ¶ˆæ¯
            wishAudio.play();
            
            // 4. ä¿®æ”¹é¡µé¢ä¸Šçš„æç¤ºæ–‡å­—
            document.getElementById('hintText').innerText = "æ„¿æœ›ä¸€å®šä¼šå®ç°ï¼ğŸ";

            // 5. å¼¹å‡ºæ–‡å­—å¼¹çª—ï¼ˆä¿æŒåŸæ¥çš„æ ·å­ï¼‰
            setTimeout(() => {
                alert("âœ¨ æ„¿æœ›å·²è®¸ä¸‹ï¼\n\nç¤¼ç‰©åœ¨è·¯ä¸Šäº†ï¼Œç­‰æˆ‘ä»¬è§é¢ï¼ğŸ");
            }, 500); // ç¨å¾®å»¶è¿Ÿä¸€ä¸‹å¼¹å‡ºï¼Œè®©ç”»é¢å…ˆç”Ÿæ•ˆ
        }
    });
</script>
</body>
</html>
